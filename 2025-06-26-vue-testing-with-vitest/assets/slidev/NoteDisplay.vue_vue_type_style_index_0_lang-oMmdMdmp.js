import{d as T,z as x,f as v,n as m,g as c,T as N,F as B,t as C,ah as z,aj as F,ai as P,k as D,o as f,q as K,s as R,r as I,K as V,L as j,E as q,p as U}from"../modules/vue-CyF5HccW.js";import{o as X,r as G,C as H,_ as J}from"../index-q6TiDFKU.js";const M=k=>(K("data-v-e61415ee"),k=k(),R(),k),O=["title"],Q={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},W=M(()=>c("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),Y=M(()=>c("div",{"flex-auto":""},null,-1)),Z={"text-primary":""},ee=M(()=>c("span",{op25:"","text-sm":""},"/",-1)),te={op50:"","text-sm":""},oe={key:1,op50:"","flex-auto":"",pl1:""},se={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},le=["min","max"],ne=T({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(k){const d=k,t=x(()=>d.clicksContext.total),h=x(()=>X(0,d.clicksContext.clicksStart,t.value)),p=x(()=>t.value-h.value+1),a=x({get(){return d.clicksContext.current>t.value?-1:d.clicksContext.current},set(l){d.clicksContext.current=l}}),b=x(()=>G(h.value,t.value+1));function _(){d.readonly||(a.value<0||a.value>t.value)&&(a.value=0)}return(l,u)=>(f(),v("div",{class:m(["flex gap-1 items-center select-none",p.value&&d.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${p.value}`},[c("div",Q,[W,a.value>=0&&a.value!==N(H)&&l.active?(f(),v(B,{key:0},[Y,c("span",Z,C(a.value),1),ee,c("span",te,C(t.value),1)],64)):(f(),v("div",oe,C(t.value),1))]),c("div",se,[(f(!0),v(B,null,F(b.value,o=>(f(),v("div",{key:o,border:"y main","of-hidden":"",relative:"",class:m([o===0?"rounded-l border-l":"",o===t.value?"rounded-r border-r":""]),style:D({width:p.value>0?`${1/p.value*100}%`:"100%"})},[c("div",{absolute:"","inset-0":"",class:m(o<=a.value&&l.active?"bg-primary op15":"")},null,2),c("div",{class:m([+o==+a.value&&l.active?"text-primary font-bold op100 border-primary":"op30 border-main",o===0?"rounded-l":"",o===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},C(o),3)],6))),128)),z(c("input",{"onUpdate:modelValue":u[0]||(u[0]=o=>a.value=o),class:m(["range",l.readonly?"pointer-events-none":""]),type:"range",min:h.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:D({"--thumb-width":`${1/(p.value+1)*100}%`}),onMousedown:_,onFocus:u[1]||(u[1]=o=>{var y;return(y=o.currentTarget)==null?void 0:y.blur()})},null,46,le),[[P,a.value]])])],10,O))}}),de=J(ne,[["__scopeId","data-v-e61415ee"]]),ae=["innerHTML"],ie=["textContent"],re=["textContent"],L="slidev-note-fade",g="slidev-note-click-mark",pe=T({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(k,{emit:d}){const t=k,h=d,p=x(()=>{var l;return t.clicksContext!=null&&((l=t.noteHtml)==null?void 0:l.includes(g))}),a=I(null);function b(){var E,A;if(!a.value||!p.value)return;const l=Array.from(a.value.querySelectorAll(`.${g}`)),u=new Map,o=new Map;let y=0;for(const i of l){const n=Number(i.dataset.clicks);u.set(i,n);let s=i,e=i.parentElement;for(;e&&s!==a.value;)o.has(e)||o.set(e,[[null,y]]),o.get(e).push([s,n]),s=e,e=e.parentElement;y=n}const $=new Map;for(const[i,n]of o){let s=!1,e=0;for(const r of Array.from(i.childNodes)){let w=!1;for(;r===((E=n[e+1])==null?void 0:E[0]);)w=!0,e++;if(w)continue;let S=r;if(r.nodeType===3){if(!((A=r.textContent)!=null&&A.trim()))continue;S=document.createElement("span"),S.textContent=r.textContent,i.insertBefore(S,r),r.remove()}s||(s=e===0),$.set(S,n[e][1])}s||(n[0][1]=-1)}return i=>{const n=t.highlight;for(const[s,e]of o)s.classList.toggle(L,n&&!e.some(([r,w])=>w===i));for(const[s,e]of $)s.classList.toggle(L,n&&e!==i);for(const[s,e]of u)s.classList.remove(L),s.classList.toggle(`${g}-past`,n&&e<i),s.classList.toggle(`${g}-active`,n&&e===i),s.classList.toggle(`${g}-next`,n&&e===i+1),s.classList.toggle(`${g}-future`,n&&e>i+1),s.ondblclick=r=>{n&&(h("markerDblclick",r,e),!r.defaultPrevented&&(t.clicksContext.current=e,r.stopPropagation(),r.stopImmediatePropagation()))},s.onclick=r=>{n&&h("markerClick",r,e)},n&&t.autoScroll&&e===i&&s.scrollIntoView({block:"center",behavior:"smooth"})}}const _=I();return V(()=>[t.noteHtml,t.highlight],()=>{U(()=>{_.value=b()})},{immediate:!0}),j(()=>{b()}),q(()=>{var u,o;const l=((u=t.clicksContext)==null?void 0:u.current)??H;(o=_.value)==null||o.call(_,l)}),(l,u)=>l.noteHtml?(f(),v("div",{key:0,ref_key:"noteDisplay",ref:a,class:m(["prose overflow-auto outline-none slidev-note",[t.class,p.value?"slidev-note-with-clicks":""]]),innerHTML:l.noteHtml},null,10,ae)):l.note?(f(),v("div",{key:1,class:m(["prose overflow-auto outline-none slidev-note",t.class])},[c("p",{textContent:C(l.note)},null,8,ie)],2)):(f(),v("div",{key:2,class:m(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[c("p",{textContent:C(t.placeholder||"No notes.")},null,8,re)],2))}});export{de as C,pe as _};
