import{ak as Q,z as b,d as F,b as h,T as t,n as S,o as s,al as Z,Q as z,f,ah as A,i as N,am as O,g as e,ad as T,a8 as L,r as M,K as V,Z as J,L as X,P as Y,an as ee,e as c,B as te,w as y,k as E,t as se,F as oe,q as ne,s as ae}from"../modules/vue-CyF5HccW.js";import{a as le,u as ie,e as re,h as ce,j as ue,k as de,l as ve,m as me,s as pe,d as _e,n as fe,_ as xe}from"../index-q6TiDFKU.js";import{b as he,c as ke,a as P,S as ge}from"./SlideWrapper-CbacbaY_.js";import{r as ye,u as be,a as Se,_ as we,o as Ce,b as $e,S as Te,G as Me,c as ze,d as Ne}from"./shortcuts-BHtMVL9s.js";import{_ as Fe,C as je}from"./NoteDisplay.vue_vue_type_style_index_0_lang-oMmdMdmp.js";import{_ as Be}from"./DrawingControls.vue_vue_type_style_index_0_lang-CyncqmUc.js";import{_ as R}from"./IconButton.vue_vue_type_script_setup_true_lang-Cj_x_GHI.js";import"../modules/shiki-B_NOZOPM.js";import"./context-C-D9OSEQ.js";import"../modules/unplugin-icons-H9_TpQt5.js";function De(){const{counter:d,isActive:o,reset:a,pause:n,resume:v}=Q(1e3,{controls:!0});return{timer:b(()=>{const p=d.value,w=Math.floor(p%60).toString().padStart(2,"0");return`${Math.floor(p/60).toString().padStart(2,"0")}:${w}`}),isTimerActive:o,resetTimer:a,toggleTimer:()=>o.value?n():v()}}const Ie=F({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(d){const o=d,{info:a}=he(o.no);return(n,v)=>{var m,p;return s(),h(Fe,{class:S(o.class),note:(m=t(a))==null?void 0:m.note,"note-html":(p=t(a))==null?void 0:p.noteHTML,"clicks-context":n.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Le={"h-full":"","w-full":""},Ve={key:0,"w-full":"","h-full":"",flex:"~ col gap-4 items-center justify-center"},Ee=e("div",{op50:""},[T(" Use screen capturing to mirror your main screen back to presenter view."),e("br"),T(" Click the button below and "),e("b",null,"select your other monitor or window"),T(". ")],-1),Pe=F({__name:"ScreenCaptureMirror",setup(d){const o=Z("video"),a=z(null),n=z(!1);async function v(){a.value=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1,selfBrowserSurface:"include",preferCurrentTab:!1}),o.value.srcObject=a.value,o.value.play(),n.value=!0,a.value.addEventListener("inactive",()=>{o.value.srcObject=null,n.value=!1}),a.value.addEventListener("ended",()=>{o.value.srcObject=null,n.value=!1})}return(m,p)=>(s(),f("div",Le,[A(e("video",{ref_key:"video",ref:o,class:"w-full h-full object-contain"},null,512),[[O,n.value]]),n.value?N("",!0):(s(),f("div",Ve,[Ee,e("button",{class:"slidev-form-button",onClick:v}," Start Screen Mirroring ")]))]))}}),u=d=>(ne("data-v-87269ead"),d=d(),ae(),d),Re={class:"bg-main h-full slidev-presenter","pt-2px":""},Ae={flex:"~ gap-4 items-center",border:"b main",p1:""},Oe=u(()=>e("span",{op50:"",px2:""},"Current",-1)),We=u(()=>e("div",{"flex-auto":""},null,-1)),qe={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Ge={key:1,class:"h-full flex justify-center items-center"},He=u(()=>e("div",{class:"text-gray-500"}," End of the presentation ",-1)),Ue=[He],Ke=u(()=>e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1)),Qe={key:0,class:"grid-section note of-auto"},Ze={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Je=u(()=>e("div",{"border-t":"","border-main":""},null,-1)),Xe=u(()=>e("div",{class:"i-carbon:zoom-in"},null,-1)),Ye=u(()=>e("div",{class:"i-carbon:zoom-out"},null,-1)),et={class:"grid-section bottom flex"},tt=u(()=>e("div",{"flex-auto":""},null,-1)),st={class:"group flex items-center justify-center pl-4 select-none"},ot={class:"w-22px cursor-pointer"},nt=u(()=>e("div",{class:"i-carbon:time group-hover:hidden text-xl"},null,-1)),at={class:"group-not-hover:hidden flex flex-col items-center"},lt={key:0,class:"i-carbon:pause text-lg"},it={key:1,class:"i-carbon:play"},rt=u(()=>e("div",{class:"i-carbon:renew"},null,-1)),ct=[rt],ut={class:"text-2xl px-3 my-auto tabular-nums"},dt={class:"progress-bar"},vt=F({__name:"presenter",setup(d){const o=L(),a=M();ye(),be(a),Se();const{clicksContext:n,currentSlideNo:v,currentSlideRoute:m,hasNext:p,nextRoute:w,slides:j,getPrimaryClicks:W,total:q}=le(),{isDrawing:G}=ke();ie({title:`Presenter - ${pe}`}),M(!1);const{timer:H,isTimerActive:U,resetTimer:B,toggleTimer:D}=De(),K=b(()=>j.value.map(r=>{var x;const l=M(0);return{context:re(l,((x=r==null?void 0:r.meta.slide)==null?void 0:x.frontmatter.clicksStart)??0,r==null?void 0:r.meta.clicks),clicks:l}})),_=b(()=>n.value.current<n.value.total?[m.value,n.value.current+1]:p.value?[w.value,0]:null),g=b(()=>_.value&&K.value[_.value[0].no-1]);V(_,()=>{g.value&&_.value&&(g.value.clicks.value=_.value[1])},{immediate:!0});const k=J("slidev-presenter-main-slide-mode","slides"),I=z();return X(()=>{const r=a.value.querySelector("#slide-content"),l=Y(ee()),x=L();V(()=>{if(!x.value||G.value||!fe.value||!r)return;const i=r.getBoundingClientRect(),C=(l.x-i.left)/i.width*100,$=(l.y-i.top)/i.height*100;if(!(C<0||C>100||$<0||$>100))return{x:C,y:$}},i=>{_e.cursor=i})}),(r,l)=>{var x;return s(),f(oe,null,[e("div",Re,[e("div",{class:S(["grid-container",`layout${t(ce)}`])},[e("div",{ref_key:"main",ref:a,class:"relative grid-section main flex flex-col"},[e("div",Ae,[Oe,We,c(we,{modelValue:t(k),"onUpdate:modelValue":l[0]||(l[0]=i=>te(k)?k.value=i:null),options:[{label:"Slides",value:"slides"},{label:"Screen Mirror",value:"mirror"}]},null,8,["modelValue"])]),t(k)==="mirror"?(s(),h(Pe,{key:0})):N("",!0),A(c(P,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:t(Ce)},{default:y(()=>[c(Te,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),[[O,t(k)==="slides"]]),(s(),h(je,{key:(x=t(m))==null?void 0:x.no,"clicks-context":t(W)(t(m)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"]))],512),e("div",qe,[_.value&&g.value?(s(),h(P,{key:"next"},{default:y(()=>[(s(),h(ge,{key:_.value[0].no,"clicks-context":g.value.context,route:_.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(s(),f("div",Ge,Ue)),Ke]),I.value&&t(ue)?(s(),f("div",Qe,[c(t(I))])):(s(),f("div",Ze,[(s(),h(Ie,{key:`static-${t(v)}`,no:t(v),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:E({fontSize:`${t(de)}em`}),"clicks-context":t(n)},null,8,["no","style","clicks-context"])),Je,e("div",{class:S(["py-1 px-2 text-sm transition",t(o)?"":"op25"])},[c(R,{title:"Increase font size",onClick:t(ve)},{default:y(()=>[Xe]),_:1},8,["onClick"]),c(R,{title:"Decrease font size",onClick:t(me)},{default:y(()=>[Ye]),_:1},8,["onClick"]),N("",!0)],2)])),e("div",et,[c($e,{persist:!0,class:S(["transition",t(o)?"":"op25"])},null,8,["class"]),tt,e("div",st,[e("div",ot,[nt,e("div",at,[e("div",{class:"relative op-80 hover:op-100",onClick:l[3]||(l[3]=(...i)=>t(D)&&t(D)(...i))},[t(U)?(s(),f("div",lt)):(s(),f("div",it))]),e("div",{class:"op-80 hover:op-100",onClick:l[4]||(l[4]=(...i)=>t(B)&&t(B)(...i))},ct)])]),e("div",ut,se(t(H)),1)])]),(s(),h(Be,{key:2}))],2),e("div",dt,[e("div",{class:"progress h-3px bg-primary transition-all",style:E({width:`${(t(v)-1)/(t(q)-1)*100+1}%`})},null,4)])]),c(Me),c(ze),c(Ne)],64)}}}),St=xe(vt,[["__scopeId","data-v-87269ead"]]);export{St as default};
